@inherits LayoutComponentBase

<MudThemeProvider Theme="theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout Class="@layoutClass">

    @if (firstRender)
    {
        @*Header*@
        <MudAppBar Elevation="0" Color="Color.Primary" Dense="true" Fixed="LayoutManagementService.StickyHeader">
            <MudStack AlignItems="AlignItems.Center" Row="true" Spacing="2" Class="mr-5">
                <MudImage Src="images/leaf.png" Alt="" Elevation="25" Class="rounded-lg" Style="height:25px; width:25px; font-size:2rem;" />
                @if (_leftDrawerOpen)
                {
                    <MudText Typo="Typo.h4" Class="page-title mt-2">BlazorNifty</MudText>
                }

            </MudStack>
            <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
            <MudSpacer />
            <MudIconButton Icon="@Icons.Custom.Brands.MudBlazor" Color="Color.Inherit" Link="https://mudblazor.com/" Target="_blank" />
            <MudIconButton Icon="@Icons.Custom.Brands.GitHub" Color="Color.Inherit" Link="https://github.com/MudBlazor/MudBlazor/" Target="_blank" />
            <MudIconButton Icon="@Icons.Outlined.Settings" Color="Color.Inherit" OnClick="RightDrawerToggle" />
        </MudAppBar>

        @*Navigation*@
        <MudDrawer @bind-Open="@_leftDrawerOpen" Elevation="1" Variant="@DrawerVariant.Mini" ClipMode="DrawerClipMode.Docked" Fixed="LayoutManagementService.StickyNavigation" Class="@navigationClass">
            @if (_leftDrawerOpen)
            {
                <div class="nav-menu-container">
                    <NavMenu />
                </div>

            }
            else
            {
                <div class="nav-menu-container">
                    <MiniNavMenu />
                </div>
            }

        </MudDrawer>

        @*Sidebar*@
        <MudDrawer @bind-Open="@_rightDrawerOpen" Elevation="0" Anchor="Anchor.End" Class="airhaus-sidebar" Variant="@DrawerVariant.Temporary">
            @if (_rightDrawerOpen)
            {
                <div class="airhaus-sidebar-container">
                    <MudTabs Elevation="0" DisableRipple="true" DisableSliderAnimation="true" Centered="true">

                        <MudTabPanel Class="simple-tab" Style="min-width: 75px; padding: 6px 2px">
                            <TabContent>
                                <MudStack AlignItems="AlignItems.Center">
                                    <MudIcon Icon="bi bi-chat" Style="font-size: 1.3rem; color: lightgray" Class="mb-1"></MudIcon>
                                    <MudText Typo="Typo.caption">Chat</MudText>
                                </MudStack>
                            </TabContent>
                            <ChildContent>

                            </ChildContent>
                        </MudTabPanel>

                        <MudTabPanel Class="simple-tab" Style="min-width: 75px; padding: 6px 2px">
                            <TabContent>
                                <MudStack AlignItems="AlignItems.Center">
                                    <MudIcon Icon="bi bi-info-circle" Style="font-size: 1.3rem; color: lightgray" Class="mb-1"></MudIcon>
                                    <MudText Typo="Typo.caption">Reports</MudText>
                                </MudStack>
                            </TabContent>
                            <ChildContent>

                            </ChildContent>
                        </MudTabPanel>

                        <MudTabPanel Class="simple-tab" Style="min-width: 75px; padding: 6px 2px">
                            <TabContent>
                                <MudStack AlignItems="AlignItems.Center">
                                    <MudIcon Icon="bi bi-gear" Style="font-size: 1.3rem; color: lightgray" Class="mb-1"></MudIcon>
                                    <MudText Typo="Typo.caption">Settings</MudText>
                                </MudStack>
                            </TabContent>
                            <ChildContent>

                            </ChildContent>
                        </MudTabPanel>
                    </MudTabs>
                </div>


            }

        </MudDrawer>

        @*Main Content*@
        <MudMainContent Class="@mainContentClass">
            <MudContainer MaxWidth="MaxWidth.False" Style="padding-left: 0px; padding-right:0px">
                @Body
            </MudContainer>
        </MudMainContent>

         @*Layout Settings*@
        <div class="@settingsClass">
            <MudIconButton Color="Color.Dark" Variant="Variant.Filled" Icon="@Icons.Outlined.Settings" Class="btn-settings" Size="Size.Large" OnClick="SettingsToggle">

            </MudIconButton>
            @if (settingsOpen)
            {
                <div class="settings-offcanvas-body">
                    <MainLayoutSettings/>
                </div>
            }
        </div>
    }

    <MudOverlay Visible="settingsOpen" DarkBackground="true" AutoClose="true" ZIndex="9999" OnClick="SettingsToggle"></MudOverlay>
</MudLayout>


